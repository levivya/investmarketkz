NewsGrabber ST v.1.0.060810



История обновлений

060810


	

Исправлено:

Получение изображений из RSS лент при парсинге полного текста новости из RSS

Добавлено:

При парсинге полного текста в шаблоне заголовков: в проверку шаблона добавлен вывод полученного текста.

060809
	Разделение версий на ST и PRO

060808
	

Добавили:

   1. опционально - вывод картинки в RSS
   2. опционально - вывод описания новостей в админке (через title)
   3. замена переноса строки на &ltbr> в &ltpre&gt...</pre>

060803
	

Уведомление (устанавливать данный апдейт ненужно)

Если Вы поставили апдейт от 0208 и используете более чем 1 html-блок на страницу и они перестали работать - Вам необходимо зайти в админке в html-блоки и исправить имена шаблонов, так как, в рез-те глюка, они все теперь называются html_block.

060802
	

Исправлено:

Склеивание пробелов при парсинге

060731
	

Исправили:

Обновление новостей - новости, добавленные вручную, не пытаются обновиться.

060728
	

Исправили:

Перенос новостей при удалении раздела

060727
	

Добавлено:

При переносе новости в новый раздел, по старому URL отдается заголовок HTTP/1.1 301 Moved Permanently с новым Location

060726
	

Добавлено:

Добавлена возможность добавления любого количества html-блоков.

У html-блоков появилось свойство "Имя шаблона" - это идентификатор блока tpl, в который будет помещен данный блок.

В шаблонах добавляются конструкции, аналогичные , с теми идентификаторами, что указаны у html-блоков. Таким образом на одну страницу можно добавить n блоков.

Например, надо создать 3 блока для главной страницы. Создаем их, у всех в качестве шаблона страницы указываем - "/", а имена даем по порядку - "html_block_1", "html_block_2", "html_block_3" (в прочем, это не суть, главное, что они должны отличаться). После этого идем в шаблоны и добавляем в нужные места (в шаблоне index.main) конструкции "", "", "". После этого на главной странице будет выводится 3 html-блока.

Если создать еще три блока с шаблоном страницы "/*" и такими же именами шаблонов - "html_block_1", "html_block_2", "html_block_3", то эти блоки будут выводиться на всех остальных страницах, в соответствующих местах.

060725
	

Добавлено

1. Календарь, внешний вид редактируется в шаблоне calendar, вызов из других шаблонов <tpl calendar>

2. Теперь группа/подгруппа не выводится на сайте, если в ней нет новостей

3. Для построения навигации с выводом подразделов (например навигация с выпадающим меню), добавлен вывод подгрупп в меню. Для использования необходимо добавить в шаблон menu конструкцию вложенного меню. Например:
<level1> ...

<loop menu_groups>

    .......

    <loop group_items{groups_id}>

    <if subgroups_current>{subgroups_name}</if subgroups_current>

    <if !subgroups_current><a href="{subgroups_link}">{subgroups_name}</a></if !subgroups_current>

    </loop group_items{groups_id}>

</loop menu_groups>
... </level1>

<level1>

060721
	

Исправления

   1.

      Ошибка вывода групп и подгрупп новостей. Для того что бы исправление нормально функционировало, необходимо сделать замены в шаблонах: главной страницы (main), группы новостей (news.groups) и подгруппы новостей (news.subgroups).

      Необходимо заменить вызовы находящиеся в теге <h4 class="date"> (в шаблоне по умолчанию):
      {owner_link} на {news_owner_link}
      {owner_name} на {news_owner_name}
      {groups_link} на {news_groups_link}
      {groups_name} на {news_groups_name}
      Пример: <if groups_newsblock_enabled>
      <loop groups>
      ... <h4 class="date">
      ..... <if news_owner_link>
      <if show_news_group>
      - раздел: <a href="{news_owner_link}" title="Для перехода в раздел {news_owner_name} кликните по этой ссылке">
      {news_owner_name}</a>
      </if show_news_group>
      <if show_news_subgroup>
      : <a href="{news_groups_link}" title="Для перехода в рубрику {news_groups_name} кликните по этой ссылке">
      {news_groups_name}</a>
      </if show_news_subgroup>
      </if news_owner_link>
      <if !news_owner_link>
      <if show_news_group>
      - раздел: <a href="{news_groups_link}" title="Для перехода в раздел {news_groups_name} кликните по этой ссылке">
      {news_groups_name}</a>
      </if show_news_group>
      </if !news_owner_link>
      <if show_news_source>
      - Источник:.... <div id="anonce">

   2. Исправлен баг с выводом ленты новостей при просмотре новости и отключенном показе главного блока

   3. Исправлена ошибка с отображением новостей с измененной привязкой к разделу

060718
	

Добавлено:

Применение настроек из ранее созданных разделов к создаваемым или редактируемым разделам

Исправлено:

Баг с добавлением подразделов (PHP5)

060705
	

Исправлено:

Закачка swf файлов на сервер

060704
	

Добавлено:
Добавлена возможность получать swf-файлы

Исправлено:

   1. подправлено удаление новостей по фильтру
   2. исправлено сохранение списка оставляемых тегов
   3. исправлено - если указано грабить картинки или swf - не обязательно вписывать их теги в "удалять теги кроме", они подставляются автоматом
   4. исправлено обновление новости - главная картинка полученная из HTML-ленты не удаляется

060629
	

Исправлено

   1. удаление картинок при удалении новости
   2. формирование описания для новости - режеться по пробелу и добавляеться "...", если предложение больше указанной длины дескрипшена
   3. удаление шинглов при удалении по фильтру - удаляются все шинглы за указанный период
   4. откат апдейта (начиная со следующего за этим)

Изменения!!!

Изменена система называния картинок-превьюх (тех что в анонсе). В связи с этим НЕОБХОДИМО во всех шаблонах, где есть превью изменить конструкцию
170 или указанная Вами комбинация

на
prw_ШИРИНАxВЫСОТА_of_

, где ШИРИНА и ВЫСОТА - это требуемое число или его отсутствие (комбинация должна быть указана в настройке "Создавать картинки с размерами")

Если с этим возникнут сложности, обращайтесь по e-mail или в аську

060626
	

Исправили:

   1. Получение картинок с пробелом в имени картинки
   2. Появление дублей картинок при обновлении новостей
   3. Улучшили получение описания к новости

060622
	1. Пофиксили баги с обрезанием тайтлов
2. Вырезание описание из текста сделали "умнее"

060621
	Пофиксили баги. Работаем дальше... :-)

060620
	
Гиперапдейт! :-)

Добавлено:

   1. Отправка сообщение на e-mail при ошибке парсинга html-ленты. На случай если, например, на источнике сменился шаблон
   2. Отправка сообщение на e-mail при постоянной ошибке парсинга полного текста. На случай если, например, на источнике сменился шаблон
   3. Добавлен перенос группы новостей из раздела в раздел
   4. Получение полного текста новости из RSS или HTML ленты (если они там есть)
   5. Добавлено "склеивание" заголовков в HTML лентах. В шаблоне указывается:
      {title} - для певрой части заголовка
      {[delimiter]}{title} - для последующих частей заголовка, где [delimiter] - знак разделителя (необязательная конструкция)
   6. Для источников добавлена опция игнорирования глобальной опции ручной модерации
   7. Расширен фильтр новостей, добавлено удаление по фильтру с или без шинглов
   8. Добавлена возможность указать, сколько показывать новостей на странице
   9. Добавлена возможность замены слов/фраз при получении текста новости

Поправили:

    * Если в категории нет разделов, то переход в нее отображает сразу всю ленту категории, как если зашли по /all/

060615
	

Добавлено:

    * добавлена опциональная макс. длина заголовка для ЧПУ

Исправлено:

    * к новости с заголовком встречавшимся ранее, при использовании ЧПУ, добавляеся цифра к URL
    * исправлена листалка страниц в админке
    * исправлен глюк с добавлением картинки через редактор публикации

060614
	

Добавлено:

    * Возможность делать инклюды в шаблонах. Подробности на форуме.

Исправлено:

    * Исправлена ошибка конвертации кодировки UTF-8 в win-1251

060608
	

Исправлено:

   1. Получение специальных символов при парсинге
   2. Исправлен метод проверки на дубликаты по шинглам. Нагрузка на сервер должна быть поменьше

060606
	

Добавлено:

    * Возможность обрезать длину тега TITLE в просмотре новости. Параметры задаются в настройках скрипта, опциях отображения новости
    * Название раздела к тегу TITLE можно добавлять и в начале тега и в конце. Устанавливать в настройках раздела.
    * Добавлена функция поиска по сайту. Описание читать тут - http://www.newsgrabber.ru/forum/viewtopic.php?t=25

Исправлено:

    * Получение картинок, при записи в источнике атрибутов тега с пробелами

060602
	Пофиксили баги:

    * Вывод мета-тега TITLE
    * Экранирование кавычек
    * Получение картинок

Дополнение

Запрос кода при добавлении комментария можно убрать в настройках NewsGrabber. В шаблон Comments, код который выводит капчу, надо добавить конструкцию:

<if comments_use_captcha>HTML код капчи</if comments_use_captcha>

060531
	Исправлены ошибки:

    * Исправлена ошибка транслитерации символов в ЧПУ
    * Исправлена ошибка удаления пустых тегов P

060530
	

Обновление
Добавлена возможность комментирования новостей.

    * Включение данной функции находится в основных настройках NewsGrabber
    * Для управления комментариями в административной панели добавлен новый раздел "Комментарии"
    * В список шаблонов добавлен новый шаблон - "comments"
    * В шаблон просмотра новости, в место где будут отображаться коментарии и форма добавления комментария надо добавить тег <tpl comments>
    * Для отображения в анонсе количества комментариев необходимо использовать в шаблонах конструкцию <if comments_enabled>{comments_count}</if comments_enabled>

060529
	

Обновление

   1. Исправлены ошибки:
          * преобразование ссылки для альтернативной версии страницы
          * предпросмотр шаблона меню, в случае отсутствия подгрупп
          * экранирование ' при magic_quotes_runtime ON

060524
	

Обновление

   1. Добавлена функция обновления скрипта из консоли администратора
   2. Исправлены ошибки:
          * Подстановка строки для парсинга с альтернативной страницы
          * Проверка на заполнение полей для RSS лент
          * Запуск скриптов из крона
